# ============================================
# CONFIGURACIÓN PARA ENTORNO DOCKER
# ============================================
# Este perfil se activa cuando la aplicación se ejecuta en contenedores Docker

spring.application.name=spyzer

# ============================================
# BASE DE DATOS MYSQL (Docker)
# ============================================
# La URL apunta al servicio 'mysql' definido en docker-compose
spring.datasource.url=jdbc:mysql://mysql:3306/spyzerifnotexist?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:root}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:admin}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# ============================================
# SERVIDOR
# ============================================
server.port=8080

# ============================================
# REDIS (Docker)
# ============================================
# El host apunta al servicio 'redis' definido en docker-compose
spring.data.redis.host=${SPRING_DATA_REDIS_HOST:redis}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}
spring.data.redis.password=${SPRING_DATA_REDIS_PASSWORD:}
spring.data.redis.timeout=60000
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1ms

# ============================================
# CACHE
# ============================================
spring.cache.type=redis
spring.cache.redis.time-to-live=1200000

# ============================================
# SCHEDULER
# ============================================
spring.task.scheduling.pool.size=3
spring.task.scheduling.thread-name-prefix=market-scheduler-

# ============================================
# TIMEZONE
# ============================================
spring.jackson.time-zone=Europe/Madrid

# ============================================
# NOTA: Las siguientes configuraciones se inyectan desde variables de entorno
# definidas en docker-compose.dev.yml o docker-compose.prod.yml
# ============================================
# - APPLICATION_FRONTEND_URL
# - APPLICATION_SECURITY_JWT_SECRET_KEY
# - TWELVEDATA_API_KEY
# - SPRING_MAIL_USERNAME
# - SPRING_MAIL_PASSWORD
# - SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_GOOGLE_CLIENT_ID
# - SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_GOOGLE_CLIENT_SECRET
